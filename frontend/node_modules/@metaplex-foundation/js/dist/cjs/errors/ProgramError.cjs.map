{"version":3,"file":"ProgramError.cjs","sources":["../../../src/errors/ProgramError.ts"],"sourcesContent":["import {\n  MetaplexError,\n  MetaplexErrorInputWithoutSource,\n  MetaplexErrorOptions,\n} from './MetaplexError';\nimport { Program } from '@/types';\n\ntype UnderlyingProgramError = Error & { code?: number; logs?: string[] };\n\n/** @group Errors */\nexport class ProgramError extends MetaplexError {\n  public program: Program;\n\n  constructor(program: Program, input: MetaplexErrorInputWithoutSource) {\n    super({\n      ...input,\n      key: `program.${input.key}`,\n      title: `${program.name} > ${input.title}`,\n      source: 'program',\n      sourceDetails: `${program.name} [${program.address.toBase58()}]`,\n    });\n    this.program = program;\n  }\n}\n\n/** @group Errors */\nexport class ParsedProgramError extends ProgramError {\n  constructor(\n    program: Program,\n    cause: UnderlyingProgramError,\n    options?: Omit<MetaplexErrorOptions, 'cause'>\n  ) {\n    const ofCode = cause.code ? ` of code [${cause.code}]` : '';\n    super(program, {\n      key: 'parsed_program_error',\n      title: cause.message,\n      problem:\n        `The program [${program.name}] ` +\n        `at address [${program.address.toBase58()}] ` +\n        `raised an error${ofCode} ` +\n        `that translates to \"${cause.message}\".`,\n      solution: 'Check the error message provided by the program.',\n      options: {\n        ...options,\n        cause,\n      },\n    });\n  }\n}\n\n/** @group Errors */\nexport class UnknownProgramError extends ProgramError {\n  constructor(\n    program: Program,\n    cause: UnderlyingProgramError,\n    options?: Omit<MetaplexErrorOptions, 'cause' | 'logs'>\n  ) {\n    const ofCode = cause.code ? ` of code [${cause.code}]` : '';\n    super(program, {\n      key: 'unknown_program_error',\n      title: 'Unknown Program Error',\n      problem:\n        `The program [${\n          program.name\n        }] at address [${program.address.toBase58()}] ` +\n        `raised an error${ofCode} that is not recognized by the programs registered by the SDK.`,\n      solution:\n        'Unfortunately, you will need to check the unparsed ' +\n        'error below to investigate what went wrong. ' +\n        'To get more helpful error messages, ensure the program that failed is ' +\n        'registered by the SDK and provides an \"errorResolver\" method.',\n      options: {\n        ...options,\n        logs: cause.logs,\n        cause,\n      },\n    });\n  }\n}\n"],"names":["ProgramError","MetaplexError","constructor","program","input","key","title","name","source","sourceDetails","address","toBase58","ParsedProgramError","cause","options","ofCode","code","message","problem","solution","UnknownProgramError","logs"],"mappings":";;;;;;AASA;AACO,MAAMA,YAAY,SAASC,2BAAa,CAAC;AAG9CC,EAAAA,WAAW,CAACC,OAAgB,EAAEC,KAAsC,EAAE;AACpE,IAAA,KAAK,CAAC;AACJ,MAAA,GAAGA,KAAK;AACRC,MAAAA,GAAG,EAAG,CAAA,QAAA,EAAUD,KAAK,CAACC,GAAI,CAAC,CAAA;MAC3BC,KAAK,EAAG,GAAEH,OAAO,CAACI,IAAK,CAAKH,GAAAA,EAAAA,KAAK,CAACE,KAAM,CAAC,CAAA;AACzCE,MAAAA,MAAM,EAAE,SAAS;MACjBC,aAAa,EAAG,CAAEN,EAAAA,OAAO,CAACI,IAAK,CAAIJ,EAAAA,EAAAA,OAAO,CAACO,OAAO,CAACC,QAAQ,EAAG,CAAA,CAAA,CAAA;AAChE,KAAC,CAAC,CAAA;IACF,IAAI,CAACR,OAAO,GAAGA,OAAO,CAAA;AACxB,GAAA;AACF,CAAA;;AAEA;AACO,MAAMS,kBAAkB,SAASZ,YAAY,CAAC;AACnDE,EAAAA,WAAW,CACTC,OAAgB,EAChBU,KAA6B,EAC7BC,OAA6C,EAC7C;AACA,IAAA,MAAMC,MAAM,GAAGF,KAAK,CAACG,IAAI,GAAI,CAAYH,UAAAA,EAAAA,KAAK,CAACG,IAAK,CAAE,CAAA,CAAA,GAAG,EAAE,CAAA;IAC3D,KAAK,CAACb,OAAO,EAAE;AACbE,MAAAA,GAAG,EAAE,sBAAsB;MAC3BC,KAAK,EAAEO,KAAK,CAACI,OAAO;MACpBC,OAAO,EACJ,CAAef,aAAAA,EAAAA,OAAO,CAACI,IAAK,IAAG,GAC/B,CAAA,YAAA,EAAcJ,OAAO,CAACO,OAAO,CAACC,QAAQ,EAAG,CAAA,EAAA,CAAG,GAC5C,CAAA,eAAA,EAAiBI,MAAO,CAAA,CAAA,CAAE,GAC1B,CAAsBF,oBAAAA,EAAAA,KAAK,CAACI,OAAQ,CAAG,EAAA,CAAA;AAC1CE,MAAAA,QAAQ,EAAE,kDAAkD;AAC5DL,MAAAA,OAAO,EAAE;AACP,QAAA,GAAGA,OAAO;AACVD,QAAAA,KAAAA;AACF,OAAA;AACF,KAAC,CAAC,CAAA;AACJ,GAAA;AACF,CAAA;;AAEA;AACO,MAAMO,mBAAmB,SAASpB,YAAY,CAAC;AACpDE,EAAAA,WAAW,CACTC,OAAgB,EAChBU,KAA6B,EAC7BC,OAAsD,EACtD;AACA,IAAA,MAAMC,MAAM,GAAGF,KAAK,CAACG,IAAI,GAAI,CAAYH,UAAAA,EAAAA,KAAK,CAACG,IAAK,CAAE,CAAA,CAAA,GAAG,EAAE,CAAA;IAC3D,KAAK,CAACb,OAAO,EAAE;AACbE,MAAAA,GAAG,EAAE,uBAAuB;AAC5BC,MAAAA,KAAK,EAAE,uBAAuB;AAC9BY,MAAAA,OAAO,EACJ,CACCf,aAAAA,EAAAA,OAAO,CAACI,IACT,iBAAgBJ,OAAO,CAACO,OAAO,CAACC,QAAQ,EAAG,CAAA,EAAA,CAAG,GAC9C,CAAA,eAAA,EAAiBI,MAAO,CAA+D,8DAAA,CAAA;AAC1FI,MAAAA,QAAQ,EACN,qDAAqD,GACrD,8CAA8C,GAC9C,wEAAwE,GACxE,+DAA+D;AACjEL,MAAAA,OAAO,EAAE;AACP,QAAA,GAAGA,OAAO;QACVO,IAAI,EAAER,KAAK,CAACQ,IAAI;AAChBR,QAAAA,KAAAA;AACF,OAAA;AACF,KAAC,CAAC,CAAA;AACJ,GAAA;AACF;;;;;;"}