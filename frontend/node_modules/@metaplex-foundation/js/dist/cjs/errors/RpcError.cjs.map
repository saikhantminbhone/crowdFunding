{"version":3,"file":"RpcError.cjs","sources":["../../../src/errors/RpcError.ts"],"sourcesContent":["import { SendTransactionError, TransactionError } from '@solana/web3.js';\nimport {\n  MetaplexError,\n  MetaplexErrorInputWithoutSource,\n  MetaplexErrorOptions,\n} from './MetaplexError';\nimport type { ConfirmTransactionResponse } from '@/plugins/rpcModule';\n\n/** @group Errors */\nexport class RpcError extends MetaplexError {\n  constructor(input: MetaplexErrorInputWithoutSource) {\n    super({\n      ...input,\n      key: `rpc.${input.key}`,\n      source: 'rpc',\n    });\n  }\n}\n\n/** @group Errors */\nexport class FailedToSendTransactionError extends RpcError {\n  constructor(\n    cause: Error,\n    options?: Omit<MetaplexErrorOptions, 'cause' | 'logs'>\n  ) {\n    super({\n      key: 'failed_to_send_transaction',\n      title: 'Failed to Send Transaction',\n      problem: `The transaction could not be sent successfully to the network.`,\n      solution: 'Check the error below for more information.',\n      options: {\n        ...options,\n        logs: (cause as SendTransactionError).logs,\n        cause,\n      },\n    });\n  }\n\n  public asSendTransactionError(): SendTransactionError {\n    return this.cause as SendTransactionError;\n  }\n\n  public get error() {\n    return this.asSendTransactionError().message;\n  }\n\n  public get errorLogs() {\n    return this.asSendTransactionError().logs ?? [];\n  }\n}\n\n/** @group Errors */\nexport class FailedToConfirmTransactionError extends RpcError {\n  constructor(cause: Error, options?: Omit<MetaplexErrorOptions, 'cause'>) {\n    super({\n      key: 'failed_to_confirm_transaction',\n      title: 'Failed to Confirm Transaction',\n      problem: `The transaction could not be confirmed.`,\n      solution: 'Check the error below for more information.',\n      options: { ...options, cause },\n    });\n  }\n}\n\n/** @group Errors */\nexport class FailedToConfirmTransactionWithResponseError extends FailedToConfirmTransactionError {\n  public readonly response: ConfirmTransactionResponse;\n\n  constructor(response: ConfirmTransactionResponse) {\n    const getMessage = (error: TransactionError | null): string => {\n      if (!error) return 'Unknown error';\n      if (typeof error === 'string') return error;\n      try {\n        return JSON.stringify(error);\n      } catch (error) {\n        return 'Unknown error';\n      }\n    };\n\n    super(new Error(getMessage(response.value.err)));\n    this.response = response;\n  }\n\n  public get error(): TransactionError {\n    return this.response.value.err ?? 'Unknown error';\n  }\n}\n"],"names":["RpcError","MetaplexError","constructor","input","key","source","FailedToSendTransactionError","cause","options","title","problem","solution","logs","asSendTransactionError","error","message","errorLogs","FailedToConfirmTransactionError","FailedToConfirmTransactionWithResponseError","response","getMessage","JSON","stringify","Error","value","err"],"mappings":";;;;;;AAQA;AACO,MAAMA,QAAQ,SAASC,2BAAa,CAAC;EAC1CC,WAAW,CAACC,KAAsC,EAAE;AAClD,IAAA,KAAK,CAAC;AACJ,MAAA,GAAGA,KAAK;AACRC,MAAAA,GAAG,EAAG,CAAA,IAAA,EAAMD,KAAK,CAACC,GAAI,CAAC,CAAA;AACvBC,MAAAA,MAAM,EAAE,KAAA;AACV,KAAC,CAAC,CAAA;AACJ,GAAA;AACF,CAAA;;AAEA;AACO,MAAMC,4BAA4B,SAASN,QAAQ,CAAC;AACzDE,EAAAA,WAAW,CACTK,KAAY,EACZC,OAAsD,EACtD;AACA,IAAA,KAAK,CAAC;AACJJ,MAAAA,GAAG,EAAE,4BAA4B;AACjCK,MAAAA,KAAK,EAAE,4BAA4B;AACnCC,MAAAA,OAAO,EAAG,CAA+D,8DAAA,CAAA;AACzEC,MAAAA,QAAQ,EAAE,6CAA6C;AACvDH,MAAAA,OAAO,EAAE;AACP,QAAA,GAAGA,OAAO;QACVI,IAAI,EAAGL,KAAK,CAA0BK,IAAI;AAC1CL,QAAAA,KAAAA;AACF,OAAA;AACF,KAAC,CAAC,CAAA;AACJ,GAAA;AAEOM,EAAAA,sBAAsB,GAAyB;IACpD,OAAO,IAAI,CAACN,KAAK,CAAA;AACnB,GAAA;AAEA,EAAA,IAAWO,KAAK,GAAG;AACjB,IAAA,OAAO,IAAI,CAACD,sBAAsB,EAAE,CAACE,OAAO,CAAA;AAC9C,GAAA;AAEA,EAAA,IAAWC,SAAS,GAAG;AACrB,IAAA,OAAO,IAAI,CAACH,sBAAsB,EAAE,CAACD,IAAI,IAAI,EAAE,CAAA;AACjD,GAAA;AACF,CAAA;;AAEA;AACO,MAAMK,+BAA+B,SAASjB,QAAQ,CAAC;AAC5DE,EAAAA,WAAW,CAACK,KAAY,EAAEC,OAA6C,EAAE;AACvE,IAAA,KAAK,CAAC;AACJJ,MAAAA,GAAG,EAAE,+BAA+B;AACpCK,MAAAA,KAAK,EAAE,+BAA+B;AACtCC,MAAAA,OAAO,EAAG,CAAwC,uCAAA,CAAA;AAClDC,MAAAA,QAAQ,EAAE,6CAA6C;AACvDH,MAAAA,OAAO,EAAE;AAAE,QAAA,GAAGA,OAAO;AAAED,QAAAA,KAAAA;AAAM,OAAA;AAC/B,KAAC,CAAC,CAAA;AACJ,GAAA;AACF,CAAA;;AAEA;AACO,MAAMW,2CAA2C,SAASD,+BAA+B,CAAC;EAG/Ff,WAAW,CAACiB,QAAoC,EAAE;IAChD,MAAMC,UAAU,GAAIN,KAA8B,IAAa;AAC7D,MAAA,IAAI,CAACA,KAAK,EAAE,OAAO,eAAe,CAAA;AAClC,MAAA,IAAI,OAAOA,KAAK,KAAK,QAAQ,EAAE,OAAOA,KAAK,CAAA;MAC3C,IAAI;AACF,QAAA,OAAOO,IAAI,CAACC,SAAS,CAACR,KAAK,CAAC,CAAA;OAC7B,CAAC,OAAOA,KAAK,EAAE;AACd,QAAA,OAAO,eAAe,CAAA;AACxB,OAAA;KACD,CAAA;AAED,IAAA,KAAK,CAAC,IAAIS,KAAK,CAACH,UAAU,CAACD,QAAQ,CAACK,KAAK,CAACC,GAAG,CAAC,CAAC,CAAC,CAAA;IAChD,IAAI,CAACN,QAAQ,GAAGA,QAAQ,CAAA;AAC1B,GAAA;AAEA,EAAA,IAAWL,KAAK,GAAqB;IACnC,OAAO,IAAI,CAACK,QAAQ,CAACK,KAAK,CAACC,GAAG,IAAI,eAAe,CAAA;AACnD,GAAA;AACF;;;;;;;"}